---
title: Install & Configure
subtitle: Quick and easy, you’ll be up and running in just a few minutes.
layout: layouts/page.njk
page:
  theme: theme-cream-light
---
{%- from "plugins/css/component.njk" import component with context -%}

<div
	class="[ center container stack-lg ][][ article-install ]"
	x-data="InstallApp()"
>
	{{ component( "Step",
		{
			componentData: components.Phone.Install.Step1,
			step: 1,
			subtitle: '<a target="_blank" href="https://libbyapp.com/search/libraries">Search for your library</a> on Libby’s website'
		}
	) }}


	{% call component( "Step",
		{
			componentData: components.Phone.Install.Step2,
			step: 2,
			subtitle: "Tap your library in the search results. Copy the URL then paste it below."
		}
	) %}
		<div
			x-bind:data-validated="librarySlug !== undefined"
			x-bind:data-error="error.type === 'url'"
		>
			<input
				x-model="userLibraryUrl"

				type="url"
				placeholder="Libby URL"
			/>
		</div>
		<p
			aria-live="polite"
			class="[][ font-xs ][]"
			x-show="error.type === 'url'"
			x-text="error.message"
		></p>
	{% endcall %}


	{{ component( "Step",
		{
			componentData: components.Phone.Install.Step3,
			step: 3,
			subtitle: 'Open the <a href="App-prefs://prefs:root">Settings</a> app, scroll to Shortcuts</a>, then enable <strong>Allow Untrusted Shortcuts</strong>'
		}
	) }}


	{% call component( "Step",
		{
			componentData: components.Phone.Install.Step4,
			step: 4,
			subtitle: '<span x-show="librarySlug">Open <a target="_blank" href="https://www.icloud.com/shortcuts/27d1f2285ad344768d5faba6801639a9">this link</a> to install the <strong class="[][ no-wrap ][]">' + site.title + '</strong> Shortcut</span><span x-show="!librarySlug">Before continuing, you’ll need the “slug” for your library.</span>'
		}
	) %}
		<div
			x-cloak
			x-show="!librarySlug"

			class="[ stack ][][]"
		>
			<p>Head back to <a href="#step-2">Step 2</a> and double-check your Libby library URL.</p>
		</div>

		<div
			x-cloak
			x-show="librarySlug"

			class="[ stack ][][]"
		>
			<p
			>
				Scroll to the bottom of the screen, then tap <strong>Add Untrusted Shortcut</strong>.
			</p>

			<p
			>
				When prompted “What is your library slug?” type or paste
				<code
					class="[][ theme-black ][ slug ]"
					x-text="librarySlug"
				></code>
			</p>
		</div>
	{% endcall %}
</div>

<script>
	let InstallApp = () =>
	{
		return {
			error: {
				message: "",
				type: null,
			},

			userLibraryUrl: "",

			get librarySlug()
			{
				if( this.libraryUrl )
				{
					let pathElements = this.libraryUrl.pathname.split( "/" );
					if( pathElements[1] !== "library" || pathElements.length !== 3)
					{
						return;
					}

					return pathElements[2];
				}
			},

			get libraryUrl()
			{
				this.error.type = null;
				this.error.message = "";

				if( this.userLibraryUrl && this.userLibraryUrl.length > 8 )
				{
					try
					{
						let userUrl = new URL( this.userLibraryUrl );
						let baseUrl = "https://libbyapp.com/library/";

						if( userUrl.hostname === "libbyapp.com" )
						{
							if( userUrl.pathname.indexOf( "/library/" ) === 0 )
							{
								return userUrl;
							}
							else
							{
								if( baseUrl.indexOf( this.userLibraryUrl ) !== 0 )
								{
									this.error.type = "url";
									this.error.message = "That doesn’t look like the right Libby URL";
								}
							}
						}
						else
						{
							if( baseUrl.indexOf( this.userLibraryUrl ) !== 0 )
							{
								this.error.type = "url";
								this.error.message = "That doesn’t look like a Libby URL";
							}
						}

					}
					catch( error )
					{
						this.error.type = "url";
						this.error.message = "That doesn’t look like a valid URL";
					}
				}
			},
		};
	};
</script>
